<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="1.SSH安装及免密配置集群、单节点模式都需要用到SSH登陆，Ubuntu默认已安装了SSH client，此外还需要安装SSH server 输入如下命令： 12345678910111213141516171819#更新源sudo apt-get update#一般的ubuntu不自带服务器的ssh，都有客服端的ssh，需要安装服务器端的sshsudo apt-get install open">
<meta property="og:type" content="article">
<meta property="og:title" content="基于Ubuntu20.04搭建伪分布式Hadoop生态圈">
<meta property="og:url" content="http://example.com/posts/75e3a0d6.html">
<meta property="og:site_name" content="Giesen × Blog">
<meta property="og:description" content="1.SSH安装及免密配置集群、单节点模式都需要用到SSH登陆，Ubuntu默认已安装了SSH client，此外还需要安装SSH server 输入如下命令： 12345678910111213141516171819#更新源sudo apt-get update#一般的ubuntu不自带服务器的ssh，都有客服端的ssh，需要安装服务器端的sshsudo apt-get install open">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-04-13T08:37:28.000Z">
<meta property="article:modified_time" content="2022-04-13T08:43:19.703Z">
<meta property="article:author" content="Giesen">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/logo.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/logo-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/logo-apple-180x180.png">
        
      
    
    <!-- title -->
    <title>基于Ubuntu20.04搭建伪分布式Hadoop生态圈</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Article</a></li>
         
          <li><a href="/categories/gallery">Gallery</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" aria-label="Next post " href="/posts/fbecf928.html"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/posts/75e3a0d6.html"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/posts/75e3a0d6.html&text=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/posts/75e3a0d6.html&is_video=false&description=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=基于Ubuntu20.04搭建伪分布式Hadoop生态圈&body=Check out this article: http://example.com/posts/75e3a0d6.html"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/posts/75e3a0d6.html&name=基于Ubuntu20.04搭建伪分布式Hadoop生态圈&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/posts/75e3a0d6.html&t=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SSH%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%8D%E5%AF%86%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">1.SSH安装及免密配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-JDK%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">2.JDK配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">2.1.</span> <span class="toc-text">2.1.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">2.2.</span> <span class="toc-text">2.2.设置环境变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">3.Hadoop伪分布式配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Spark%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">4.Spark配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">4.1.</span> <span class="toc-text">4.1.安装所需软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E4%B8%8B%E8%BD%BD-Apache-Spark"><span class="toc-number">4.2.</span> <span class="toc-text">4.2.下载 Apache Spark</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">4.3.</span> <span class="toc-text">4.3.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E4%BD%BFhadoop%E5%92%8Cspark%E5%BB%BA%E7%AB%8B%E8%81%94%E7%B3%BB"><span class="toc-number">4.4.</span> <span class="toc-text">4.4.使hadoop和spark建立联系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E7%BC%96%E8%BE%91profile%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.5.</span> <span class="toc-text">4.5.编辑profile配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%90%AF%E5%8A%A8spark"><span class="toc-number">4.6.</span> <span class="toc-text">4.6.启动spark</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Zookeeper%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">5.Zookeeper配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">5.1.</span> <span class="toc-text">5.1.下载安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">5.2.</span> <span class="toc-text">5.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6zoo-cfg"><span class="toc-number">5.3.</span> <span class="toc-text">5.3.配置文件zoo.cfg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E9%85%8D%E7%BD%AE"><span class="toc-number">5.4.</span> <span class="toc-text">5.4.配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-ip%E5%9C%B0%E5%9D%80%E5%A1%AB%E5%86%99%E4%B8%BAubuntu%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%9C%B0%E5%9D%80"><span class="toc-number">5.5.</span> <span class="toc-text">5.5.ip地址填写为ubuntu的主机地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-%E7%BC%96%E8%BE%91profile%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.6.</span> <span class="toc-text">5.6.编辑profile配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-%E5%90%AF%E5%8A%A8-%E5%85%B3%E9%97%ADzookeeper"><span class="toc-number">5.7.</span> <span class="toc-text">5.7.启动&#x2F;关闭zookeeper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Hbase%E9%85%8D%E7%BD%AE"><span class="toc-number">6.</span> <span class="toc-text">6.Hbase配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E7%A1%AE%E4%BF%9D%E7%89%88%E6%9C%AC%E4%BE%9D%E8%B5%96%E5%AF%B9%E5%BA%94"><span class="toc-number">6.1.</span> <span class="toc-text">6.1.确保版本依赖对应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">6.2.</span> <span class="toc-text">6.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">6.3.</span> <span class="toc-text">6.3.配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">6.4.</span> <span class="toc-text">6.4.伪分布式模式配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E9%85%8D%E7%BD%AE-usr-local-hbase-conf-hbase-site-xml"><span class="toc-number">6.5.</span> <span class="toc-text">6.5.配置&#x2F;usr&#x2F;local&#x2F;hbase&#x2F;conf&#x2F;hbase-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8CHBase"><span class="toc-number">6.6.</span> <span class="toc-text">6.6.测试运行HBase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-%E6%B3%A8%E6%84%8F"><span class="toc-number">6.7.</span> <span class="toc-text">6.7.注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Mysql%E9%85%8D%E7%BD%AE"><span class="toc-number">7.</span> <span class="toc-text">7.Mysql配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%AE%89%E8%A3%85Mysql"><span class="toc-number">7.1.</span> <span class="toc-text">7.1.安装Mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-number">7.2.</span> <span class="toc-text">7.2.初始化配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E6%A3%80%E6%9F%A5Mysql%E6%9C%8D%E5%8A%A1%E7%8A%B6%E6%80%81"><span class="toc-number">7.3.</span> <span class="toc-text">7.3.检查Mysql服务状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE"><span class="toc-number">7.4.</span> <span class="toc-text">7.4.配置远程访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-Mysql8-x-x%E9%85%8D%E7%BD%AEJDBC"><span class="toc-number">7.5.</span> <span class="toc-text">7.5.Mysql8.x.x配置JDBC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-%E4%BD%BF%E7%94%A8pyspark%E8%BF%9E%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">7.6.</span> <span class="toc-text">7.6.使用pyspark连接mysql数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-Mysql%E5%91%BD%E4%BB%A4"><span class="toc-number">7.7.</span> <span class="toc-text">7.7.Mysql命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-Mysql%E7%99%BB%E5%BD%95%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.8.</span> <span class="toc-text">7.8.Mysql登录报错解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-sqoop%E5%AF%BC%E5%85%A5MySQL%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.9.</span> <span class="toc-text">7.9.sqoop导入MySQL中文乱码解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Mongodb%E9%85%8D%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">8.Mongodb配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E9%85%8D%E7%BD%AE%E5%AE%89%E8%A3%85"><span class="toc-number">8.1.</span> <span class="toc-text">8.1.配置安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%ADMongoDB"><span class="toc-number">8.2.</span> <span class="toc-text">8.2.启动和关闭MongoDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%B0%BE%E5%B7%B4"><span class="toc-number">8.3.</span> <span class="toc-text">8.3.尾巴</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Hive%E9%85%8D%E7%BD%AE"><span class="toc-number">9.</span> <span class="toc-text">9.Hive配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E4%B8%8B%E8%BD%BDHive-3-1-2"><span class="toc-number">9.1.</span> <span class="toc-text">9.1.下载Hive-3.1.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">9.2.</span> <span class="toc-text">9.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">9.3.</span> <span class="toc-text">9.3.配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E5%88%9B%E5%BB%BA%E7%BC%96%E8%BE%91hive-site-xml"><span class="toc-number">9.4.</span> <span class="toc-text">9.4.创建编辑hive-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">9.5.</span> <span class="toc-text">9.5.添加以下代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E5%AF%B9%E5%BA%94%E7%9A%84%E7%9B%AE%E5%BD%95%E5%B9%B6%E8%B5%8B%E4%BA%88%E8%AF%BB%E5%86%99%E6%9D%83%E9%99%90"><span class="toc-number">9.6.</span> <span class="toc-text">9.6.创建两个对应的目录并赋予读写权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-%E6%B3%A8%E6%84%8F%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E5%BA%94%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%A9%B1%E5%8A%A8%E7%B1%BB%E5%90%8D%E7%A7%B0"><span class="toc-number">9.7.</span> <span class="toc-text">9.7.注意不同版本的数据库对应不同数据库的驱动类名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-%E9%85%8D%E7%BD%AEhive-env-sh%E6%96%87%E4%BB%B6"><span class="toc-number">9.8.</span> <span class="toc-text">9.8.配置hive-env.sh文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-9-%E5%B0%86JDBC%E7%9A%84jar%E5%8C%85%E6%8B%B7%E8%B4%9D%E5%9C%A8-usr-local-hive-lib%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="toc-number">9.9.</span> <span class="toc-text">9.9.将JDBC的jar包拷贝在&#x2F;usr&#x2F;local&#x2F;hive&#x2F;lib目录下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-10-%E5%9C%A8-usr-local-hive-bin%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%A7%E8%A1%8C%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4"><span class="toc-number">9.10.</span> <span class="toc-text">9.10.在&#x2F;usr&#x2F;local&#x2F;hive&#x2F;bin目录下执行以下命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-11-%E6%B3%A8%E6%84%8F"><span class="toc-number">9.11.</span> <span class="toc-text">9.11.注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-12-%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A0"><span class="toc-number">9.12.</span> <span class="toc-text">9.12.报错原因</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-12-1-%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A01"><span class="toc-number">9.12.1.</span> <span class="toc-text">9.12.1.报错原因1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-12-2-%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A02"><span class="toc-number">9.12.2.</span> <span class="toc-text">9.12.2.报错原因2</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-13-%E5%B0%BE%E5%B7%B4"><span class="toc-number">9.13.</span> <span class="toc-text">9.13.尾巴</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Sqoop%E9%85%8D%E7%BD%AE"><span class="toc-number">10.</span> <span class="toc-text">10.Sqoop配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E4%B8%8B%E8%BD%BDsqoop1-4-7"><span class="toc-number">10.1.</span> <span class="toc-text">10.1.下载sqoop1.4.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">10.2.</span> <span class="toc-text">10.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">10.3.</span> <span class="toc-text">10.3.配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6sqoop-env-sh"><span class="toc-number">10.4.</span> <span class="toc-text">10.4.修改配置文件sqoop-env.sh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E9%AA%8C%E8%AF%81Sqoop%E5%AE%89%E8%A3%85"><span class="toc-number">10.5.</span> <span class="toc-text">10.5.验证Sqoop安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-%E5%B0%86mysql%E9%A9%B1%E5%8A%A8%E5%8C%85%E6%8B%B7%E8%B4%9D%E5%88%B0-SQOOP-HOME-lib"><span class="toc-number">10.6.</span> <span class="toc-text">10.6.将mysql驱动包拷贝到$SQOOP_HOME&#x2F;lib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-7-%E6%B5%8B%E8%AF%95%E4%B8%8EMySQL%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">10.7.</span> <span class="toc-text">10.7.测试与MySQL的连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3"><span class="toc-number">10.8.</span> <span class="toc-text">10.8.报错解决</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%B0%BE%E5%B7%B4"><span class="toc-number">11.</span> <span class="toc-text">11.尾巴</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        基于Ubuntu20.04搭建伪分布式Hadoop生态圈
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Giesen</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2022-04-13T08:37:28.000Z" itemprop="datePublished">2022-04-13</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="1-SSH安装及免密配置"><a href="#1-SSH安装及免密配置" class="headerlink" title="1.SSH安装及免密配置"></a>1.SSH安装及免密配置</h2><p>集群、单节点模式都需要用到SSH登陆，Ubuntu默认已安装了SSH client，此外还需要安装SSH server</p>
<p>输入如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">更新源</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">一般的ubuntu不自带服务器的ssh，都有客服端的ssh，需要安装服务器端的ssh</span></span><br><span class="line">sudo apt-get install openssh-server       </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">启动ssh</span></span><br><span class="line">ssh localhost      </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">下面配置无密码ssh登录</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">若没有该目录，请先执行一次ssh localhost，~表示用户的主文件夹</span></span><br><span class="line">cd ~/.ssh/     </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 会有提示，一直按回车就可以</span></span><br><span class="line">ssh-keygen -t rsa     </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 加入授权</span></span><br><span class="line">cat ./id_rsa.pub &gt;&gt; ./authorized_keys    </span><br></pre></td></tr></table></figure>

<p>此时再用ssh localhost命令，无需输入密码就可以直接登陆了。</p>
<hr>
<h2 id="2-JDK配置"><a href="#2-JDK配置" class="headerlink" title="2.JDK配置"></a>2.JDK配置</h2><p>进入<a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/downloads/#java8">Java Downloads | Oracle</a>下载页面。（建议使用JDK1.8）</p>
<p>根据Linux系统的位数选择要下载的压缩包。</p>
<p>执行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getconf LONG_BIT</span><br></pre></td></tr></table></figure>

<p>如果显示32，则是23位的Linux系统，如果显示64，则是64位的Linux系统。这里是64位的，所以下载<strong>Linux x64</strong></p>
<p>下载需要注册Oracle的账号，注册邮箱推荐<a target="_blank" rel="noopener" href="https://mail.163.com/">网易邮箱</a>。</p>
<p><strong>注：JDK8或者JDK1.8是由于自从JDK1.5/JDK5命名方式改变后遗留的新旧命令方式问题。所以JDK8和JDK1.8等价。</strong></p>
<h3 id="2-1-解压安装"><a href="#2-1-解压安装" class="headerlink" title="2.1.解压安装"></a>2.1.解压安装</h3><ol>
<li><p>创建安装目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/java/</span><br></pre></td></tr></table></figure></li>
<li><p>解压缩到安装目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">注意下载的jdk版本</span></span><br><span class="line">sudo tar -zxvf jdk-8u231-linux-x64.tar.gz -C /usr/local/java/ </span><br></pre></td></tr></table></figure></li>
<li><p>解压缩以后，进入/usr/local/java/目录后，你会发现多一个目录，它就是JDK所在目录。JDK版本不同，这个目录名有所不同，这里是<strong>jdk1.8.0_231</strong>，那么完整路径就是**/usr/local/java/jdk1.8.0_231**。</p>
</li>
</ol>
<h3 id="2-2-设置环境变量"><a href="#2-2-设置环境变量" class="headerlink" title="2.2.设置环境变量"></a>2.2.设置环境变量</h3><ol>
<li><p>编辑变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.profile</span><br></pre></td></tr></table></figure></li>
<li><p>编辑模式下输入配置的环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">set</span> java1.8</span></span><br><span class="line">    export JAVA_HOME=/usr/local/java/jdk1.8.0_231</span><br><span class="line">    export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">    export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">    export PATH=.:$&#123;JAVA_HOME&#125;/bin:$PATH</span><br></pre></td></tr></table></figure></li>
<li><p>使环境变量生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure></li>
<li><p>查看Java版本信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure></li>
<li><p>得到输出结果</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java version &quot;1.8.0_231&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_231-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.231-b12, mixed mode)</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="3-Hadoop伪分布式配置"><a href="#3-Hadoop伪分布式配置" class="headerlink" title="3.Hadoop伪分布式配置"></a>3.Hadoop伪分布式配置</h2><p>可参照历史博文</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://giesen.top/posts/4a3195fd.html">基于WSL搭建Hadoop伪分布式</a></li>
</ul>
<hr>
<h2 id="4-Spark配置"><a href="#4-Spark配置" class="headerlink" title="4.Spark配置"></a>4.Spark配置</h2><h3 id="4-1-安装所需软件包"><a href="#4-1-安装所需软件包" class="headerlink" title="4.1.安装所需软件包"></a>4.1.安装所需软件包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install curl mlocate git scala -y</span><br></pre></td></tr></table></figure>



<h3 id="4-2-下载-Apache-Spark"><a href="#4-2-下载-Apache-Spark" class="headerlink" title="4.2.下载 Apache Spark"></a>4.2.下载 Apache Spark</h3><p>更多最新版本可以查看<a target="_blank" rel="noopener" href="https://spark.apache.org/downloads.html">官方下载页面</a>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://archive.apache.org/dist/spark/spark-3.2.1/spark-3.2.1-bin-hadoop3.2.tgz</span><br></pre></td></tr></table></figure>



<h3 id="4-3-解压安装"><a href="#4-3-解压安装" class="headerlink" title="4.3.解压安装"></a>4.3.解压安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">解压文件</span></span><br><span class="line">sudo tar -zxf spark安装包 -C /usr/local/        </span><br><span class="line"></span><br><span class="line">cd /usr/local</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">将解压后的文件重命名为spark</span></span><br><span class="line">sudo mv ./spark-3.2.1 ./spark       </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">设置用户权限，-R后的参数表示计算机用户名</span></span><br><span class="line">sudo chown -R 用户名 ./spark           </span><br></pre></td></tr></table></figure>



<h3 id="4-4-使hadoop和spark建立联系"><a href="#4-4-使hadoop和spark建立联系" class="headerlink" title="4.4.使hadoop和spark建立联系"></a>4.4.使hadoop和spark建立联系</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/spark</span><br><span class="line"></span><br><span class="line">cp ./conf/spark-env.sh.template ./conf/spark-env.sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">编辑spark-env.sh文件</span></span><br><span class="line">sudo vim ./conf/spark-env.sh               </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">在文件最后一行加入:(来使hadoop和spark建立联系)</span></span><br><span class="line">export SPARK_DIST_CLASSPATH=$(/usr/local/hadoop-3.2.2/bin/hadoop classpath)    </span><br></pre></td></tr></table></figure>



<h3 id="4-5-编辑profile配置文件"><a href="#4-5-编辑profile配置文件" class="headerlink" title="4.5.编辑profile配置文件"></a>4.5.编辑profile配置文件</h3><p>增加spark安装目录到系统路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加下面两行到文件并保存</span></span><br><span class="line">export SPARK_HOME=/usr/local/spark</span><br><span class="line">export PATH=$PATH:$SPARK_HOME/bin:$SPARK_HOME/sbin</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">保存文件并生效</span></span><br><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure>



<h3 id="4-6-启动spark"><a href="#4-6-启动spark" class="headerlink" title="4.6.启动spark"></a>4.6.启动spark</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在/usr/<span class="built_in">local</span>/spark/目录下输入命令即可启动</span></span><br><span class="line">./bin/pyspark</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="5-Zookeeper配置"><a href="#5-Zookeeper配置" class="headerlink" title="5.Zookeeper配置"></a>5.Zookeeper配置</h2><h3 id="5-1-下载安装包"><a href="#5-1-下载安装包" class="headerlink" title="5.1.下载安装包"></a>5.1.下载安装包</h3><p>通过<a target="_blank" rel="noopener" href="https://downloads.apache.org/zookeeper/">官方下载页面</a>下载</p>
<h3 id="5-2-解压安装"><a href="#5-2-解压安装" class="headerlink" title="5.2.解压安装"></a>5.2.解压安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">解压文件</span></span><br><span class="line">sudo tar -zxf apache-zookeeper-3.6.3-bin.tar.gz -C /usr/local</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">将解压后的文件重命名为zookeeper</span></span><br><span class="line">sudo mv ./apache-zookeeper-3.6.3-bin ./zookeeper</span><br></pre></td></tr></table></figure>



<h3 id="5-3-配置文件zoo-cfg"><a href="#5-3-配置文件zoo-cfg" class="headerlink" title="5.3.配置文件zoo.cfg"></a>5.3.配置文件zoo.cfg</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将解压后zookeeper目录下的conf目录下的zoo_sample.cfg文件重命名为zoo.cfg</span></span><br><span class="line">mv zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure>



<h3 id="5-4-配置"><a href="#5-4-配置" class="headerlink" title="5.4.配置"></a>5.4.配置</h3><p>这里是配置单机模式，也就是只有一个机器的集群，所以server只要配置一个即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"># The number of milliseconds of each tick  </span><br><span class="line">  </span><br><span class="line">#这个时间是作为Zookeeper服务器之间或客户端与服务器之间维持心跳的时间间隔  </span><br><span class="line">tickTime=2000  </span><br><span class="line">  </span><br><span class="line"># The number of ticks that the initial   </span><br><span class="line"># synchronization phase can take  </span><br><span class="line">  </span><br><span class="line">#配置 Zookeeper 接受客户端初始化连接时最长能忍受多少个心跳时间间隔数。  </span><br><span class="line">initLimit=10  </span><br><span class="line">  </span><br><span class="line"># The number of ticks that can pass between   </span><br><span class="line"># sending a request and getting an acknowledgement  </span><br><span class="line">  </span><br><span class="line">#Leader 与 Follower 之间发送消息，请求和应答时间长度  </span><br><span class="line">syncLimit=5  </span><br><span class="line">  </span><br><span class="line"># the directory where the snapshot is stored.  </span><br><span class="line"># do not use /tmp for storage, /tmp here is just   </span><br><span class="line"># example sakes.  </span><br><span class="line"># dataDir=/tmp/zookeeper  </span><br><span class="line">  </span><br><span class="line">#数据目录需要提前创建  </span><br><span class="line">dataDir=/usr/local/zookeeper/data  </span><br><span class="line">  </span><br><span class="line">#日志目录需要提前创建  </span><br><span class="line">dataLogDir=/usr/local/zookeeper/log</span><br><span class="line">  </span><br><span class="line"># the port at which the clients will connect  </span><br><span class="line">  </span><br><span class="line">#访问端口号  </span><br><span class="line">clientPort=2181  </span><br><span class="line">  </span><br><span class="line"># the maximum number of client connections.  </span><br><span class="line"># increase this if you need to handle more clients  </span><br><span class="line">#maxClientCnxns=60  </span><br><span class="line">#  </span><br><span class="line"># Be sure to read the maintenance section of the   </span><br><span class="line"># administrator guide before turning on autopurge.  </span><br><span class="line">#  </span><br><span class="line"># http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance  </span><br><span class="line">#  </span><br><span class="line"># The number of snapshots to retain in dataDir  </span><br><span class="line">#autopurge.snapRetainCount=3  </span><br><span class="line"># Purge task interval in hours  </span><br><span class="line"># Set to &quot;0&quot; to disable auto purge feature  </span><br><span class="line">#autopurge.purgeInterval=1  </span><br><span class="line">  </span><br><span class="line">#server.每个节点服务编号=服务器ip地址：集群通信端口：选举端口  </span><br><span class="line">server.1=ip地址:2888:3888  </span><br><span class="line">#server.2=slave1.hadoop.com:2888:3888  </span><br><span class="line">#server.3=slave2.hadoop.com:2888:3888</span><br></pre></td></tr></table></figure>



<h3 id="5-5-ip地址填写为ubuntu的主机地址"><a href="#5-5-ip地址填写为ubuntu的主机地址" class="headerlink" title="5.5.ip地址填写为ubuntu的主机地址"></a>5.5.ip地址填写为ubuntu的主机地址</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure>



<h3 id="5-6-编辑profile配置文件"><a href="#5-6-编辑profile配置文件" class="headerlink" title="5.6.编辑profile配置文件"></a>5.6.编辑profile配置文件</h3><p>增加zookeeper安装目录到系统路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加下面两行到文件并保存</span></span><br><span class="line">export ZOOKEEPER_HOME=/usr/local/zookeeper</span><br><span class="line">export PATH=$&#123;ZOOKEEPER_HOME&#125;/bin:$PATH</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">保存文件并生效</span></span><br><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure>



<h3 id="5-7-启动-关闭zookeeper"><a href="#5-7-启动-关闭zookeeper" class="headerlink" title="5.7.启动/关闭zookeeper"></a>5.7.启动/关闭zookeeper</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">启动</span></span><br><span class="line">./zkServer.sh start</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看状态</span></span><br><span class="line">zkServer.sh status</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">关闭</span></span><br><span class="line">./zkServer.sh stop</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="6-Hbase配置"><a href="#6-Hbase配置" class="headerlink" title="6.Hbase配置"></a>6.Hbase配置</h2><h3 id="6-1-确保版本依赖对应"><a href="#6-1-确保版本依赖对应" class="headerlink" title="6.1.确保版本依赖对应"></a>6.1.确保版本依赖对应</h3><p>在安装HBase之前，因HBase对Hadoop具有版本依赖性，故需确保已经安装了Hadoop3.x.x。</p>
<h3 id="6-2-解压安装"><a href="#6-2-解压安装" class="headerlink" title="6.2.解压安装"></a>6.2.解压安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">解压安装包hbase-2.2.2-bin.tar.gz至路径 /usr/<span class="built_in">local</span></span></span><br><span class="line">sudo tar -zxf ~/下载/hbase-2.2.2-bin.tar.gz -C /usr/local</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">将解压后的文件重命名为hbase</span></span><br><span class="line">sudo mv ./hbase-2.2.2 ./hbase</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">设置用户权限，-R后的参数表示计算机用户名</span></span><br><span class="line">sudo chown -R 用户名 ./hbase</span><br></pre></td></tr></table></figure>



<h3 id="6-3-配置环境变量"><a href="#6-3-配置环境变量" class="headerlink" title="6.3.配置环境变量"></a>6.3.配置环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将hbase下的bin目录添加到path中，启动hbase时便无需到/usr/<span class="built_in">local</span>/hbase目录下启动</span></span><br><span class="line">sudo vim ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加下面两行到文件并保存</span></span><br><span class="line">export PATH=$PATH:/usr/local/hbase/bin</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HBASE_HOME/bin:$PATH</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">保存文件并生效</span></span><br><span class="line">source ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看HBase版本，确定hbase安装成功</span></span><br><span class="line">/usr/local/hbase/bin/hbase version</span><br></pre></td></tr></table></figure>



<h3 id="6-4-伪分布式模式配置"><a href="#6-4-伪分布式模式配置" class="headerlink" title="6.4.伪分布式模式配置"></a>6.4.伪分布式模式配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/local/hbase/conf/hbase-env.sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">配置JAVA_HOME，HBASE_CLASSPATH，HBASE_MANAGES_ZK.</span> </span><br><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_231</span><br><span class="line">export HBASE_CLASSPATH=/usr/local/hbase/conf</span><br><span class="line">export HBASE_MANAGES_ZK=true</span><br></pre></td></tr></table></figure>



<h3 id="6-5-配置-usr-local-hbase-conf-hbase-site-xml"><a href="#6-5-配置-usr-local-hbase-conf-hbase-site-xml" class="headerlink" title="6.5.配置/usr/local/hbase/conf/hbase-site.xml"></a>6.5.配置/usr/local/hbase/conf/hbase-site.xml</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/local/hbase/conf/hbase-site.xml</span><br></pre></td></tr></table></figure>

<p>修改hbase.rootdir，指定HBase数据在HDFS上的存储路径；将属性hbase.cluter.distributed设置为true。假设当前Hadoop集群运行在伪分布式模式下，在本机上运行，且NameNode运行在9000端口。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.unsafe.stream.capability.enforce<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="6-6-测试运行HBase"><a href="#6-6-测试运行HBase" class="headerlink" title="6.6.测试运行HBase"></a>6.6.测试运行HBase</h3><ol>
<li><p>首先登陆ssh，再切换目录至/usr/local/hadoop ；再启动hadoop，如果已经启动hadoop请跳过此步骤。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br><span class="line"></span><br><span class="line">cd /usr/local/hadoop</span><br><span class="line"></span><br><span class="line">./sbin/start-dfs.sh</span><br></pre></td></tr></table></figure></li>
<li><p>切换目录至/usr/local/hbase；再启动HBase。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hbase</span><br><span class="line"></span><br><span class="line">bin/start-hbase.sh</span><br></pre></td></tr></table></figure></li>
<li><p>输入命令jps，看到以下界面说明hbase启动成功</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Jps</span><br><span class="line">HMaster</span><br><span class="line">HQuorumPeer</span><br><span class="line">NameNode</span><br><span class="line">HRegionServer</span><br><span class="line">SecondaryNameNode</span><br><span class="line">DataNode</span><br></pre></td></tr></table></figure></li>
<li><p>进入shell界面</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hbase shell</span><br></pre></td></tr></table></figure></li>
<li><p>停止HBase运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/stop-hbase.sh</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="6-7-注意"><a href="#6-7-注意" class="headerlink" title="6.7.注意"></a>6.7.注意</h3><ol>
<li><p>如果在操作HBase的过程中发生错误，可以通过{HBASE_HOME}目录（/usr/local/hbase）下的logs子目录中的日志文件查看错误原因。  </p>
</li>
<li><p>这里启动关闭Hadoop和HBase的顺序一定是：  启动Hadoop—&gt;启动HBase—&gt;关闭HBase—&gt;关闭Hadoop</p>
</li>
</ol>
<hr>
<h2 id="7-Mysql配置"><a href="#7-Mysql配置" class="headerlink" title="7.Mysql配置"></a>7.Mysql配置</h2><p><a target="_blank" rel="noopener" href="http://www.mysql.com/">MySQL</a>是一个关系型数据库管理系统，由瑞典MySQL AB公司开发，目前属于Oracle旗下产品。MySQL最流行的关系型数据库管理系统，在WEB应用方面MySQL是最好的RDBMS(Relational Database Management System，关系数据库管理系统) 应用软件之一。</p>
<h3 id="7-1-安装Mysql"><a href="#7-1-安装Mysql" class="headerlink" title="7.1.安装Mysql"></a>7.1.安装Mysql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">更新软件源</span></span><br><span class="line">sudo apt-get update </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">安装mysql</span></span><br><span class="line">sudo apt-get install mysql-server </span><br></pre></td></tr></table></figure>



<h3 id="7-2-初始化配置"><a href="#7-2-初始化配置" class="headerlink" title="7.2.初始化配置"></a>7.2.初始化配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure>

<ol>
<li><p>取消对密码的强校验</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VALIDATE PASSWORD PLUGIN can be used to test passwords...</span><br><span class="line">Press y|Y for Yes, any other key for No: N (选择N ,不会进行密码的强校验)</span><br></pre></td></tr></table></figure></li>
<li><p>设置密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Please set the password for root here...</span><br><span class="line">New password: (输入密码)</span><br><span class="line">Re-enter new password: (重复输入)</span><br></pre></td></tr></table></figure></li>
<li><p>不删除匿名用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">By default, a MySQL installation has an anonymous user,</span><br><span class="line">allowing anyone to log into MySQL without having to have</span><br><span class="line">a user account created for them...</span><br><span class="line">Remove anonymous users? (Press y|Y for Yes, any other key for No) : N (选择N，不删除匿名用户)</span><br></pre></td></tr></table></figure></li>
<li><p>允许root远程连接</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Normally, root should only be allowed to connect from</span><br><span class="line">&#x27;localhost&#x27;. This ensures that someone cannot guess at</span><br><span class="line">the root password from the network...</span><br><span class="line">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : N (选择N，允许root远程连接)</span><br></pre></td></tr></table></figure></li>
<li><p>保留test数据库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">By default, MySQL comes with a database named &#x27;test&#x27; that</span><br><span class="line">anyone can access...</span><br><span class="line">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : N (选择N，保留test数据库)</span><br></pre></td></tr></table></figure></li>
<li><p>使修改权限立即生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Reloading the privilege tables will ensure that all changes</span><br><span class="line">made so far will take effect immediately.</span><br><span class="line">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y (选择Y，使修改权限立即生效)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-3-检查Mysql服务状态"><a href="#7-3-检查Mysql服务状态" class="headerlink" title="7.3.检查Mysql服务状态"></a>7.3.检查Mysql服务状态</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysql.service</span><br></pre></td></tr></table></figure>



<h3 id="7-4-配置远程访问"><a href="#7-4-配置远程访问" class="headerlink" title="7.4.配置远程访问"></a>7.4.配置远程访问</h3><p>在Ubuntu下MySQL是只允许本地访问的，若需要远程访问，则需要进行配置；</p>
<ol>
<li><p>找到 bind-address 修改值为 0.0.0.0</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">找到 bind-address 修改值为 0.0.0.0</span></span><br><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure></li>
<li><p>重启Mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/mysql restart</span><br></pre></td></tr></table></figure></li>
<li><p>登录Mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -u root -p</span><br></pre></td></tr></table></figure></li>
<li><p>输入用户密码并查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#切换数据库 </span><br><span class="line">mysql<span class="operator">&gt;</span>use mysql; </span><br><span class="line"></span><br><span class="line">#查询用户表命令</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> <span class="keyword">User</span>,authentication_string,Host <span class="keyword">from</span> <span class="keyword">user</span>; </span><br><span class="line"></span><br><span class="line">#查看状态 </span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> host,<span class="keyword">user</span>,plugin <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>设置权限与密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#使用mysql_native_password修改加密规则</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span>; </span><br><span class="line"></span><br><span class="line">#更新一下用户的密码</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span> PASSWORD EXPIRE NEVER; </span><br><span class="line"></span><br><span class="line">#允许远程访问</span><br><span class="line">mysql<span class="operator">&gt;</span> UPDATE <span class="keyword">user</span> <span class="keyword">SET</span> host <span class="operator">=</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">WHERE</span> <span class="keyword">user</span> <span class="operator">=</span> <span class="string">&#x27;root&#x27;</span>; </span><br></pre></td></tr></table></figure></li>
<li><p>刷新cache中配置 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#刷新权限 </span><br><span class="line">mysql<span class="operator">&gt;</span>flush privileges; mysql<span class="operator">&gt;</span>quit;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-5-Mysql8-x-x配置JDBC"><a href="#7-5-Mysql8-x-x配置JDBC" class="headerlink" title="7.5.Mysql8.x.x配置JDBC"></a>7.5.Mysql8.x.x配置JDBC</h3><ol>
<li><p>找到系统对应版本的java JDBC:<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/connector/j/">MySQL :: Download Connector/J</a></p>
</li>
<li><p>操作系统选择<code>Platform Independent</code>或<code>Ubuntu Linux</code>，下载<code>mysql-connector-java-8.x.x.tar.gz</code>或<code>mysql-connector-java_8.x.x-1ubuntu20.04_all.deb</code>文件。</p>
</li>
<li><p>把该驱动程序解压拷贝到spark的安装目录下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">只需mysql-connector-java-8.x.x-bin.jar文件即可</span></span><br><span class="line">sudo tar -zxf ~/Downloads/mysql-connector-java-8.x.x.tar.gz -C /usr/local/spark/jars</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-6-使用pyspark连接mysql数据库"><a href="#7-6-使用pyspark连接mysql数据库" class="headerlink" title="7.6.使用pyspark连接mysql数据库"></a>7.6.使用pyspark连接mysql数据库</h3><ol>
<li><p>连接之前需要先添加信息，打开数据库向数据库添加表格和信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">create</span> database spark ;</span><br><span class="line">mysql<span class="operator">&gt;</span>use spark;</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">create</span> <span class="keyword">table</span> student (id <span class="type">int</span>(<span class="number">4</span>), name <span class="type">char</span>(<span class="number">20</span>), gender <span class="type">char</span>(<span class="number">4</span>),age <span class="type">int</span>(<span class="number">4</span>));</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;Xueqian&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="number">23</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;Weiliang&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="number">24</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student ;</span><br></pre></td></tr></table></figure></li>
<li><p>pyspark通过jdbc连接MySQL数据库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打开spark</span></span><br><span class="line">sudo cd /usr/local/spark/bin</span><br><span class="line"></span><br><span class="line">./pyspark</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">注意是在spark中</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;jdbcDF=spark.read.format(<span class="string">&quot;jdbc&quot;</span>).option(<span class="string">&quot;driver&quot;</span>,<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>).option(<span class="string">&quot;url&quot;</span>,<span class="string">&quot;jdbc:mysql://localhost:3306/spark&quot;</span>).option(<span class="string">&quot;dbtable&quot;</span>,<span class="string">&quot;student&quot;</span>).option(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;root&quot;</span>).option(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;密码&quot;</span>).load()</span></span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;jdbcDF.show()</span></span><br></pre></td></tr></table></figure></li>
<li><p>正确连接即可显示mysql刚刚新建的表格信息</p>
</li>
</ol>
<h3 id="7-7-Mysql命令"><a href="#7-7-Mysql命令" class="headerlink" title="7.7.Mysql命令"></a>7.7.Mysql命令</h3><ol>
<li><p>检查服务状态</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysql.service</span><br><span class="line"><span class="meta">#</span><span class="bash">or</span></span><br><span class="line">sudo service mysql status</span><br></pre></td></tr></table></figure></li>
<li><p>mysql服务启动停止</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">启动</span> </span><br><span class="line">sudo service mysql start</span><br><span class="line"><span class="meta">#</span><span class="bash">停止</span></span><br><span class="line">sudo service mysql stop</span><br></pre></td></tr></table></figure></li>
</ol>
<p>3.其他详细命令可参照历史博文</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://giesen.top/posts/3db3b806.html">MySQL命令汇总</a></li>
</ul>
<h3 id="7-8-Mysql登录报错解决方案"><a href="#7-8-Mysql登录报错解决方案" class="headerlink" title="7.8.Mysql登录报错解决方案"></a>7.8.Mysql登录报错解决方案</h3><ol>
<li><p>mysql登录时报错</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1045 (28000): Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27; (using password: YES)</span><br></pre></td></tr></table></figure></li>
<li><p>解决方案</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/mysql/my.cnf </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">登录时跳过权限检查,添加在末尾</span></span><br><span class="line">[mysqld] </span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure></li>
<li><p>重启mysql服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart mysqld</span><br></pre></td></tr></table></figure></li>
<li><p>修改密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#登录mysql，直接回车（Enter）</span><br><span class="line">mysql –u root –p</span><br><span class="line"></span><br><span class="line">#修改</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">set</span> password <span class="keyword">for</span> ‘root’@‘localhost’<span class="operator">=</span>password(‘密码’);</span><br><span class="line"></span><br><span class="line">#如果报错</span><br><span class="line">ERROR <span class="number">1290</span> (HY000): The MySQL server <span class="keyword">is</span> <span class="keyword">running</span> <span class="keyword">with</span> the <span class="comment">--skip-grant-tables option so it cannot execute this statement</span></span><br><span class="line"></span><br><span class="line">#输入</span><br><span class="line">mysql<span class="operator">&gt;</span>flush privileges;</span><br><span class="line"></span><br><span class="line">#再次输入</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">set</span> password <span class="keyword">for</span> ‘root’@‘localhost’<span class="operator">=</span>password(‘密码’);</span><br><span class="line"></span><br><span class="line">#为避免麻烦，再次设置远程访问</span><br><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span>IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;Admin123@qwe&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br><span class="line"></span><br><span class="line">#输入</span><br><span class="line">mysql<span class="operator">&gt;</span>flush privileges;</span><br><span class="line"></span><br><span class="line">#退出</span><br><span class="line">mysql<span class="operator">&gt;</span>exit</span><br></pre></td></tr></table></figure></li>
<li><p>取消跳过权限检查</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/mysql/my.cnf </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">注释或删除</span></span><br><span class="line">[mysqld] </span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure></li>
<li><p>重启mysql即可使用新密码连接</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart mysqld</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-9-sqoop导入MySQL中文乱码解决方案"><a href="#7-9-sqoop导入MySQL中文乱码解决方案" class="headerlink" title="7.9.sqoop导入MySQL中文乱码解决方案"></a>7.9.sqoop导入MySQL中文乱码解决方案</h3><ol>
<li><p>导致导入（可以插入中文，但不能用sqoop导入中文）时中文乱码的原因是character_set_server默认设置是latin1。</p>
</li>
<li><p>解决方案</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">编辑配置文件</span></span><br><span class="line">sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">在[mysqld]下添加一行</span></span><br><span class="line">character_set_server=utf8</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>重启mysql服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure></li>
<li><p>登陆mysql，查看mysql目前设置的编码为utf8即可解决。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#注意在mysql中执行命令</span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> &quot;char%&quot;;</span><br></pre></td></tr></table></figure></li>
<li><p>关于utf8mb3 &amp; uft8mb4</p>
</li>
</ol>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/htuhxf/article/details/90676341">MYSQL（8.0版本及以上）- utf8mb3，utf8mb4 和utf8的含义和由来</a></li>
</ul>
<hr>
<h2 id="8-Mongodb配置"><a href="#8-Mongodb配置" class="headerlink" title="8.Mongodb配置"></a>8.Mongodb配置</h2><h3 id="8-1-配置安装"><a href="#8-1-配置安装" class="headerlink" title="8.1.配置安装"></a>8.1.配置安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装依赖包</span></span><br><span class="line">sudo apt-get install libcurl4 openssl</span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭和卸载原有的mongodb</span></span><br><span class="line">service mongodb stop</span><br><span class="line">sudo apt-get remove mongodb</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 导入包管理系统使用的公钥</span></span><br><span class="line">wget -qO - https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add -</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果命令执行结果没有显示OK，则执行此命令在把上一句重新执行：sudo apt-get install gnupg</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 注册mongodb源</span></span><br><span class="line">echo &quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.4 multiverse&quot; | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更新源</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装mongodb</span></span><br><span class="line">sudo apt-get install -y mongodb-org=4.4.2 mongodb-org-server=4.4.2 mongodb-org-shell=4.4.2 mongodb-org-mongos=4.4.2 mongodb-org-tools=4.4.2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装过程中如果提示: mongodb-org-tools : 依赖: mongodb-database-tools 但是它将不会被安装</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 终端下运行以下命令,解决:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo apt-get autoremove mongodb-org-mongos mongodb-org-tools mongodb-org</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo apt-get install -y mongodb-org=4.4.2</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建数据存储目录</span></span><br><span class="line">sudo mkdir -p /data/db</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改配置，开放27017端口</span></span><br><span class="line">sudo vim /etc/mongod.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 把12行附近的port=27017左边的<span class="comment">#号去掉</span></span></span><br></pre></td></tr></table></figure>



<h3 id="8-2-启动和关闭MongoDB"><a href="#8-2-启动和关闭MongoDB" class="headerlink" title="8.2.启动和关闭MongoDB"></a>8.2.启动和关闭MongoDB</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 重新加载配置，并启动mongodb</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start mongod</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看运行状态</span></span><br><span class="line">sudo systemctl status mongod</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果mongodb状态为stop，则运行 sudo systemctl <span class="built_in">enable</span> mongod</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止mongodb</span></span><br><span class="line">sudo systemctl stop mongod</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启mongodb</span></span><br><span class="line">sudo systemctl restart mongod</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入交互终端</span></span><br><span class="line">mongo</span><br></pre></td></tr></table></figure>



<h3 id="8-3-尾巴"><a href="#8-3-尾巴" class="headerlink" title="8.3.尾巴"></a>8.3.尾巴</h3><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/yutu75/article/details/110941936">Ubuntu20.04安装MongoDB及其基本使用</a></li>
</ul>
<hr>
<h2 id="9-Hive配置"><a href="#9-Hive配置" class="headerlink" title="9.Hive配置"></a>9.Hive配置</h2><h3 id="9-1-下载Hive-3-1-2"><a href="#9-1-下载Hive-3-1-2" class="headerlink" title="9.1.下载Hive-3.1.2"></a>9.1.下载Hive-3.1.2</h3><p><a target="_blank" rel="noopener" href="http://mirror.bit.edu.cn/apache/hive/hive-3.1.2/apache-hive-3.1.2-bin.tar.gz">apache-hive-3.1.2-bin.tar.gz</a></p>
<h3 id="9-2-解压安装"><a href="#9-2-解压安装" class="headerlink" title="9.2.解压安装"></a>9.2.解压安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">解压安装包apache-hive-3.1.2-bin.tar.gz至路径 /usr/<span class="built_in">local</span></span></span><br><span class="line">sudo tar -zxf ~/下载/apache-hive-3.1.2-bin.tar.gz -C /usr/local</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">将解压后的文件重命名为hbase</span></span><br><span class="line">sudo mv ./apache-hive-3.1.2-bin.tar.gz ./hive</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">设置用户权限，-R后的参数表示计算机用户名</span></span><br><span class="line">sudo chown -R 用户名 ./hive</span><br></pre></td></tr></table></figure>



<h3 id="9-3-配置环境变量"><a href="#9-3-配置环境变量" class="headerlink" title="9.3.配置环境变量"></a>9.3.配置环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加下面两行到文件并保存</span></span><br><span class="line">export HIVE_HOME=/usr/local/hive</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">保存文件并生效</span></span><br><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure>



<h3 id="9-4-创建编辑hive-site-xml"><a href="#9-4-创建编辑hive-site-xml" class="headerlink" title="9.4.创建编辑hive-site.xml"></a>9.4.创建编辑hive-site.xml</h3><p>在/usr/local/hive/conf目录下，创建hive-site.xml。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建文件</span></span><br><span class="line">touch hive-site.xml  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">修改编辑</span></span><br><span class="line">sudo vim hive-site.xml </span><br></pre></td></tr></table></figure>



<h3 id="9-5-添加以下代码"><a href="#9-5-添加以下代码" class="headerlink" title="9.5.添加以下代码"></a>9.5.添加以下代码</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.schema.verification<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">          Enforce metastore schema version consistency.</span><br><span class="line">          True: Verify that version information stored in metastore matches with one from Hive jars.  Also disable automatic</span><br><span class="line">          schema migration attempt. Users are required to manully migrate schema after Hive upgrade which ensures</span><br><span class="line">          proper metastore schema migration. (Default)</span><br><span class="line">          False: Warn if the version information stored in metastore doesn&#x27;t match with one from in Hive jars.</span><br><span class="line">      <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 存储在hdfs上的数据路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>location of default database for the warehouse<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.exec.scratchdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hadoop-3.2.2/tmp/hdfs/hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>HDFS root scratch dir for Hive jobs which gets created with write all (733) permission. For each connecting user, an HDFS scratch dir: $&#123;hive.exec.scratchdir&#125;/<span class="symbol">&amp;lt;</span>username<span class="symbol">&amp;gt;</span> is created, with $&#123;hive.scratch.dir.permission&#125;.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 本地mysql --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://localhost:3306/myhive?createDatabaseIfNotExist=true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">description</span>&gt;</span>JDBC connect string for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 如果 mysql 和 hive 在同一个服务器节点，那么请更改 hadoop02 为 localhost --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">description</span>&gt;</span>Driver class name for a JDBC metastore<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">description</span>&gt;</span>username to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>数据库密码<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>password to use against metastore database<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="9-6-创建两个对应的目录并赋予读写权限"><a href="#9-6-创建两个对应的目录并赋予读写权限" class="headerlink" title="9.6.创建两个对应的目录并赋予读写权限"></a>9.6.创建两个对应的目录并赋予读写权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo -mkdir -p /usr/local/hive/warehouse</span><br><span class="line">sudo -mkdir -p /usr/local/hadoop-3.2.2/tmp/hdfs/hive</span><br><span class="line">sudo -chmod -R 777 /usr/local/hive/warehouse</span><br><span class="line">sudo -chmod -R 777 /usr/local/hadoop-3.2.2/tmp/hdfs/hive</span><br></pre></td></tr></table></figure>



<h3 id="9-7-注意不同版本的数据库对应不同数据库的驱动类名称"><a href="#9-7-注意不同版本的数据库对应不同数据库的驱动类名称" class="headerlink" title="9.7.注意不同版本的数据库对应不同数据库的驱动类名称"></a>9.7.注意不同版本的数据库对应不同数据库的驱动类名称</h3><ul>
<li>新版本8.0版本的驱动为com.mysql.cj.jdbc.Driver  </li>
<li>旧版本5.x版本的驱动为com.mysql.jdbc.Driver</li>
</ul>
<h3 id="9-8-配置hive-env-sh文件"><a href="#9-8-配置hive-env-sh文件" class="headerlink" title="9.8.配置hive-env.sh文件"></a>9.8.配置hive-env.sh文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在/usr/<span class="built_in">local</span>/hive/conf下执行该命令</span></span><br><span class="line">sudo cp hive-env.sh.template hive-env.sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加下面三行到文件并保存</span></span><br><span class="line">export HADOOP_HOME=/usr/local/hadoop-3.2.2</span><br><span class="line">export HIVE_CONF_DIR=/usr/local/hive/conf</span><br><span class="line">export HIVE_AUX_JARS_PATH=/usr/local/hive/lib</span><br></pre></td></tr></table></figure>



<h3 id="9-9-将JDBC的jar包拷贝在-usr-local-hive-lib目录下"><a href="#9-9-将JDBC的jar包拷贝在-usr-local-hive-lib目录下" class="headerlink" title="9.9.将JDBC的jar包拷贝在/usr/local/hive/lib目录下"></a>9.9.将JDBC的jar包拷贝在/usr/local/hive/lib目录下</h3><ul>
<li><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/file/?id=494887">mysql-connector-java_8.0.20-1ubuntu20.04_all.deb</a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">解压文件，将文件中的mysql-connector-java-8.0.20.jar复制到/usr/<span class="built_in">local</span>/hive/lib中</span></span><br><span class="line">sudo tar zxvf mysql-connector-java_8.0.20-1ubuntu20.04_all.deb</span><br><span class="line">sudo mv mysql-connector-java-8.0.20.jar /usr/local/hive/lib</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="9-10-在-usr-local-hive-bin目录下执行以下命令"><a href="#9-10-在-usr-local-hive-bin目录下执行以下命令" class="headerlink" title="9.10.在/usr/local/hive/bin目录下执行以下命令"></a>9.10.在/usr/local/hive/bin目录下执行以下命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">schematool -dbType mysql -initSchema</span><br><span class="line">schematool -dbType mysql -info</span><br><span class="line">hive</span><br></pre></td></tr></table></figure>



<h3 id="9-11-注意"><a href="#9-11-注意" class="headerlink" title="9.11.注意"></a>9.11.注意</h3><p>启动hive时需先启动hadoop集群、zookeeper和mysql，关闭则倒序执行。</p>
<h3 id="9-12-报错原因"><a href="#9-12-报错原因" class="headerlink" title="9.12.报错原因"></a>9.12.报错原因</h3><h4 id="9-12-1-报错原因1"><a href="#9-12-1-报错原因1" class="headerlink" title="9.12.1.报错原因1"></a>9.12.1.报错原因1</h4><ol>
<li><p>Jar包冲突<br>因为跟hadoop的jar包存在冲突，主要有两个jar包冲突，一个log4j-slf4j-impl-2.10.0.jar跟hadoop冲突，可以删除。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv $HIVE_HOME/lib/log4j-slf4j-impl-2.10.0.jar $HIVE_HOME/lib/log4j-slf4j-impl-2.10.0.bak</span><br></pre></td></tr></table></figure></li>
<li><p>另一个是guava-19.0.jar，跟hadoop里面的guava-27.0-jre.jar冲突，故采用高版本替换低版本的方式。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo cp $HADOOP_HOME/share/hadoop/common/lib/guava-27.0-jre.jar $HIVE_HOME/lib</span><br><span class="line"></span><br><span class="line">sudo rm $HIVE_HOME/lib/guava-19.0.jar</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="9-12-2-报错原因2"><a href="#9-12-2-报错原因2" class="headerlink" title="9.12.2.报错原因2"></a>9.12.2.报错原因2</h4><p>hive-site.xml配置文件中，3278行（见报错记录第二行）有特殊字符。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.RuntimeException: com.ctc.wstx.exc.WstxParsingException: Illegal character entity: expansion character (code 0x8  </span><br><span class="line">at [row,col,system-id]: [3278,96,&quot;file:/export/servers/apache-hive-3.1.2-bin/conf/hive-site.xml&quot;]</span><br></pre></td></tr></table></figure>

<p>进入hive-site.xml文件，跳转到对应行，删除里面的<code>&amp;#8</code>特殊字符即可。</p>
<h3 id="9-13-尾巴"><a href="#9-13-尾巴" class="headerlink" title="9.13.尾巴"></a>9.13.尾巴</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lehoso/p/15596193.html">hive3.1.2_博客园</a></li>
<li><a target="_blank" rel="noopener" href="https://dblab.xmu.edu.cn/blog/2440-2/">Hive3.1.2安装指南_厦大数据库实验室博客</a></li>
</ul>
<hr>
<h2 id="10-Sqoop配置"><a href="#10-Sqoop配置" class="headerlink" title="10.Sqoop配置"></a>10.Sqoop配置</h2><p>Sqoop是一款开源的工具，主要用于在Hadoop(Hive)与传统的数据库(mysql、postgresql…)间进行数据的传递，可以将一个关系型数据库（例如 ： MySQL ,Oracle ,Postgres等）中的数据导进到Hadoop的HDFS中，也可以将HDFS的数据导进到关系型数据库中。Sqoop项目开始于2009年，最早是作为Hadoop的一个第三方模块存在，后来为了让使用者能够快速部署，也为了让开发人员能够更快速的迭代开发，Sqoop独立成为一个Apache项目。</p>
<h3 id="10-1-下载sqoop1-4-7"><a href="#10-1-下载sqoop1-4-7" class="headerlink" title="10.1.下载sqoop1.4.7"></a>10.1.下载sqoop1.4.7</h3><p><a target="_blank" rel="noopener" href="https://archive.apache.org/dist/sqoop/1.4.7/">Index of /dist/sqoop/1.4.7</a></p>
<h3 id="10-2-解压安装"><a href="#10-2-解压安装" class="headerlink" title="10.2.解压安装"></a>10.2.解压安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">解压安装包hbase-2.2.2-bin.tar.gz至路径 /usr/<span class="built_in">local</span></span></span><br><span class="line">sudo tar -zxvf sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz -C /usr/local</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">将解压后的文件重命名为sqoop</span></span><br><span class="line">sudo mv ./sqoop-1.4.7.bin__hadoop-2.6.0 ./sqoop</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">设置用户权限，-R后的参数表示计算机用户名</span></span><br><span class="line">sudo chown -R 用户名 ./sqoop</span><br></pre></td></tr></table></figure>



<h3 id="10-3-配置环境变量"><a href="#10-3-配置环境变量" class="headerlink" title="10.3.配置环境变量"></a>10.3.配置环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加下面三行到文件并保存</span></span><br><span class="line">export SQOOP_HOME=/usr/local/sqoop </span><br><span class="line">export PATH=$PATH:$SQOOP_HOME/bin</span><br><span class="line">export CLASSPATH=$CLASSPATH:$SQOOP_HOME/lib</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">保存文件并生效</span></span><br><span class="line">source ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看HBase版本，确定hbase安装成功</span></span><br><span class="line">/usr/local/hbase/bin/hbase version</span><br></pre></td></tr></table></figure>



<h3 id="10-4-修改配置文件sqoop-env-sh"><a href="#10-4-修改配置文件sqoop-env-sh" class="headerlink" title="10.4.修改配置文件sqoop-env.sh"></a>10.4.修改配置文件sqoop-env.sh</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cd /sqoop/conf/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">将sqoop-env-template.sh复制一份并命名为sqoop-env.sh</span></span><br><span class="line">sudo cat sqoop-env-template.sh  &gt;&gt; sqoop-env.sh  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">编辑sqoop-env.sh</span></span><br><span class="line">sudo vim sqoop-env.sh </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加下面六行到文件并保存</span></span><br><span class="line">export HADOOP_COMMON_HOME=/usr/local/hadoop-3.2.2</span><br><span class="line">export HADOOP_MAPRED_HOME=/usr/local/hadoop-3.2.2</span><br><span class="line">export HBASE_HOME=/usr/local/hbase</span><br><span class="line">export HIVE_HOME=/usr/local/hive</span><br><span class="line">export ZOOKEEPER_HOME=/usr/local/zookeeper</span><br><span class="line">export ZOOCFGDIR=/usr/local/zookeeper/conf</span><br></pre></td></tr></table></figure>



<h3 id="10-5-验证Sqoop安装"><a href="#10-5-验证Sqoop安装" class="headerlink" title="10.5.验证Sqoop安装"></a>10.5.验证Sqoop安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/sqoop version</span><br></pre></td></tr></table></figure>



<h3 id="10-6-将mysql驱动包拷贝到-SQOOP-HOME-lib"><a href="#10-6-将mysql驱动包拷贝到-SQOOP-HOME-lib" class="headerlink" title="10.6.将mysql驱动包拷贝到$SQOOP_HOME/lib"></a>10.6.将mysql驱动包拷贝到$SQOOP_HOME/lib</h3><ul>
<li><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/connector/j/">MySQL :: Download Connector/J</a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf mysql-connector-java_8.0.28-1ubuntu20.04_all.deb</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">将mysql-connector-java_8.0.28-bin.jar拷贝到/usr/<span class="built_in">local</span>/sqoop/lib</span></span><br><span class="line">sudo cp mysql-connector-java_8.0.28-bin.jar /usr/local/sqoop/lib</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="10-7-测试与MySQL的连接"><a href="#10-7-测试与MySQL的连接" class="headerlink" title="10.7.测试与MySQL的连接"></a>10.7.测试与MySQL的连接</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">首先请确保hadoop和mysql服务已经启动</span></span><br><span class="line"><span class="meta">#</span><span class="bash">mysql启动命令，hadoop需切换至hadoop/sbin下执行启动命令</span></span><br><span class="line">service mysql start</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">测试sqoop与MySQL之间的连接是否成功</span></span><br><span class="line">sqoop list-databases --connect jdbc:mysql://127.0.0.1:3306/ --username root -P</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">mysql的数据库列表显示在屏幕上表示连接成功</span></span><br></pre></td></tr></table></figure>



<h3 id="10-8-报错解决"><a href="#10-8-报错解决" class="headerlink" title="10.8.报错解决"></a>10.8.报错解决</h3><p>错误: 找不到或无法加载主类 org.apache.sqoop.Sqoop</p>
<p>解决方法：</p>
<ol>
<li><p>sqoop-1.4.x.tar.gz在1.4.5以上的安装包已经没有了这个jar包，解压sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz</p>
</li>
<li><p>取出sqoop-1.4.7.jar放在/hadoop/share/hadoop/mapreduce/lib下，并且也放到/usr/local/sqoop/lib下。</p>
</li>
<li><p>然后重新导入数据</p>
</li>
<li><p>如果还解决不了，就在/usr/local/sqoop/bin里找到sqoop脚本，vim sqoop，修改最下面的配置。</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">将</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">exec</span> <span class="variable">$&#123;HADOOP_COMMON_HOME&#125;</span>/bin/hadoop org.apache.sqoop.Sqoop <span class="string">&quot;<span class="variable">$@</span>&quot;</span><span class="built_in">exec</span></span></span><br><span class="line"></span><br><span class="line">改为</span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;HADOOP_COMMON_HOME&#125;/bin/hadoop jar /usr/<span class="built_in">local</span>/sqoop/lib/sqoop-1.4.7.jar org.apache.sqoop.Sqoop <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span></span><br></pre></td></tr></table></figure>



<hr>
<h2 id="11-尾巴"><a href="#11-尾巴" class="headerlink" title="11.尾巴"></a>11.尾巴</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://dblab.xmu.edu.cn/blog/2630-2/">大数据软件安装和基础编程实践指南（2020年6月版）-厦大数据库实验室博客</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sa726663676/article/details/113046277">ubuntu20.04.1安装java-hadoop-spark-python-hbase-mysql-kafka及伪分布式配置 -CSDN博客</a></p>
</li>
</ul>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Article</a></li>
         
          <li><a href="/categories/gallery">Gallery</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SSH%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%8D%E5%AF%86%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">1.SSH安装及免密配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-JDK%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">2.JDK配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">2.1.</span> <span class="toc-text">2.1.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">2.2.</span> <span class="toc-text">2.2.设置环境变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">3.Hadoop伪分布式配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Spark%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">4.Spark配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">4.1.</span> <span class="toc-text">4.1.安装所需软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E4%B8%8B%E8%BD%BD-Apache-Spark"><span class="toc-number">4.2.</span> <span class="toc-text">4.2.下载 Apache Spark</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">4.3.</span> <span class="toc-text">4.3.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E4%BD%BFhadoop%E5%92%8Cspark%E5%BB%BA%E7%AB%8B%E8%81%94%E7%B3%BB"><span class="toc-number">4.4.</span> <span class="toc-text">4.4.使hadoop和spark建立联系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E7%BC%96%E8%BE%91profile%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.5.</span> <span class="toc-text">4.5.编辑profile配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%90%AF%E5%8A%A8spark"><span class="toc-number">4.6.</span> <span class="toc-text">4.6.启动spark</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Zookeeper%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">5.Zookeeper配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">5.1.</span> <span class="toc-text">5.1.下载安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">5.2.</span> <span class="toc-text">5.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6zoo-cfg"><span class="toc-number">5.3.</span> <span class="toc-text">5.3.配置文件zoo.cfg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E9%85%8D%E7%BD%AE"><span class="toc-number">5.4.</span> <span class="toc-text">5.4.配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-ip%E5%9C%B0%E5%9D%80%E5%A1%AB%E5%86%99%E4%B8%BAubuntu%E7%9A%84%E4%B8%BB%E6%9C%BA%E5%9C%B0%E5%9D%80"><span class="toc-number">5.5.</span> <span class="toc-text">5.5.ip地址填写为ubuntu的主机地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-%E7%BC%96%E8%BE%91profile%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.6.</span> <span class="toc-text">5.6.编辑profile配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-%E5%90%AF%E5%8A%A8-%E5%85%B3%E9%97%ADzookeeper"><span class="toc-number">5.7.</span> <span class="toc-text">5.7.启动&#x2F;关闭zookeeper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Hbase%E9%85%8D%E7%BD%AE"><span class="toc-number">6.</span> <span class="toc-text">6.Hbase配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E7%A1%AE%E4%BF%9D%E7%89%88%E6%9C%AC%E4%BE%9D%E8%B5%96%E5%AF%B9%E5%BA%94"><span class="toc-number">6.1.</span> <span class="toc-text">6.1.确保版本依赖对应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">6.2.</span> <span class="toc-text">6.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">6.3.</span> <span class="toc-text">6.3.配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">6.4.</span> <span class="toc-text">6.4.伪分布式模式配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E9%85%8D%E7%BD%AE-usr-local-hbase-conf-hbase-site-xml"><span class="toc-number">6.5.</span> <span class="toc-text">6.5.配置&#x2F;usr&#x2F;local&#x2F;hbase&#x2F;conf&#x2F;hbase-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8CHBase"><span class="toc-number">6.6.</span> <span class="toc-text">6.6.测试运行HBase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-%E6%B3%A8%E6%84%8F"><span class="toc-number">6.7.</span> <span class="toc-text">6.7.注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Mysql%E9%85%8D%E7%BD%AE"><span class="toc-number">7.</span> <span class="toc-text">7.Mysql配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%AE%89%E8%A3%85Mysql"><span class="toc-number">7.1.</span> <span class="toc-text">7.1.安装Mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-number">7.2.</span> <span class="toc-text">7.2.初始化配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E6%A3%80%E6%9F%A5Mysql%E6%9C%8D%E5%8A%A1%E7%8A%B6%E6%80%81"><span class="toc-number">7.3.</span> <span class="toc-text">7.3.检查Mysql服务状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE"><span class="toc-number">7.4.</span> <span class="toc-text">7.4.配置远程访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-Mysql8-x-x%E9%85%8D%E7%BD%AEJDBC"><span class="toc-number">7.5.</span> <span class="toc-text">7.5.Mysql8.x.x配置JDBC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-%E4%BD%BF%E7%94%A8pyspark%E8%BF%9E%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">7.6.</span> <span class="toc-text">7.6.使用pyspark连接mysql数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-Mysql%E5%91%BD%E4%BB%A4"><span class="toc-number">7.7.</span> <span class="toc-text">7.7.Mysql命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-Mysql%E7%99%BB%E5%BD%95%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.8.</span> <span class="toc-text">7.8.Mysql登录报错解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-sqoop%E5%AF%BC%E5%85%A5MySQL%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.9.</span> <span class="toc-text">7.9.sqoop导入MySQL中文乱码解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Mongodb%E9%85%8D%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">8.Mongodb配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E9%85%8D%E7%BD%AE%E5%AE%89%E8%A3%85"><span class="toc-number">8.1.</span> <span class="toc-text">8.1.配置安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%ADMongoDB"><span class="toc-number">8.2.</span> <span class="toc-text">8.2.启动和关闭MongoDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%B0%BE%E5%B7%B4"><span class="toc-number">8.3.</span> <span class="toc-text">8.3.尾巴</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Hive%E9%85%8D%E7%BD%AE"><span class="toc-number">9.</span> <span class="toc-text">9.Hive配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E4%B8%8B%E8%BD%BDHive-3-1-2"><span class="toc-number">9.1.</span> <span class="toc-text">9.1.下载Hive-3.1.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">9.2.</span> <span class="toc-text">9.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">9.3.</span> <span class="toc-text">9.3.配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E5%88%9B%E5%BB%BA%E7%BC%96%E8%BE%91hive-site-xml"><span class="toc-number">9.4.</span> <span class="toc-text">9.4.创建编辑hive-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">9.5.</span> <span class="toc-text">9.5.添加以下代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E5%AF%B9%E5%BA%94%E7%9A%84%E7%9B%AE%E5%BD%95%E5%B9%B6%E8%B5%8B%E4%BA%88%E8%AF%BB%E5%86%99%E6%9D%83%E9%99%90"><span class="toc-number">9.6.</span> <span class="toc-text">9.6.创建两个对应的目录并赋予读写权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-%E6%B3%A8%E6%84%8F%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E5%BA%94%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%A9%B1%E5%8A%A8%E7%B1%BB%E5%90%8D%E7%A7%B0"><span class="toc-number">9.7.</span> <span class="toc-text">9.7.注意不同版本的数据库对应不同数据库的驱动类名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-%E9%85%8D%E7%BD%AEhive-env-sh%E6%96%87%E4%BB%B6"><span class="toc-number">9.8.</span> <span class="toc-text">9.8.配置hive-env.sh文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-9-%E5%B0%86JDBC%E7%9A%84jar%E5%8C%85%E6%8B%B7%E8%B4%9D%E5%9C%A8-usr-local-hive-lib%E7%9B%AE%E5%BD%95%E4%B8%8B"><span class="toc-number">9.9.</span> <span class="toc-text">9.9.将JDBC的jar包拷贝在&#x2F;usr&#x2F;local&#x2F;hive&#x2F;lib目录下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-10-%E5%9C%A8-usr-local-hive-bin%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%A7%E8%A1%8C%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4"><span class="toc-number">9.10.</span> <span class="toc-text">9.10.在&#x2F;usr&#x2F;local&#x2F;hive&#x2F;bin目录下执行以下命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-11-%E6%B3%A8%E6%84%8F"><span class="toc-number">9.11.</span> <span class="toc-text">9.11.注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-12-%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A0"><span class="toc-number">9.12.</span> <span class="toc-text">9.12.报错原因</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-12-1-%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A01"><span class="toc-number">9.12.1.</span> <span class="toc-text">9.12.1.报错原因1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-12-2-%E6%8A%A5%E9%94%99%E5%8E%9F%E5%9B%A02"><span class="toc-number">9.12.2.</span> <span class="toc-text">9.12.2.报错原因2</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-13-%E5%B0%BE%E5%B7%B4"><span class="toc-number">9.13.</span> <span class="toc-text">9.13.尾巴</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Sqoop%E9%85%8D%E7%BD%AE"><span class="toc-number">10.</span> <span class="toc-text">10.Sqoop配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E4%B8%8B%E8%BD%BDsqoop1-4-7"><span class="toc-number">10.1.</span> <span class="toc-text">10.1.下载sqoop1.4.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">10.2.</span> <span class="toc-text">10.2.解压安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">10.3.</span> <span class="toc-text">10.3.配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6sqoop-env-sh"><span class="toc-number">10.4.</span> <span class="toc-text">10.4.修改配置文件sqoop-env.sh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E9%AA%8C%E8%AF%81Sqoop%E5%AE%89%E8%A3%85"><span class="toc-number">10.5.</span> <span class="toc-text">10.5.验证Sqoop安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-%E5%B0%86mysql%E9%A9%B1%E5%8A%A8%E5%8C%85%E6%8B%B7%E8%B4%9D%E5%88%B0-SQOOP-HOME-lib"><span class="toc-number">10.6.</span> <span class="toc-text">10.6.将mysql驱动包拷贝到$SQOOP_HOME&#x2F;lib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-7-%E6%B5%8B%E8%AF%95%E4%B8%8EMySQL%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">10.7.</span> <span class="toc-text">10.7.测试与MySQL的连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3"><span class="toc-number">10.8.</span> <span class="toc-text">10.8.报错解决</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%B0%BE%E5%B7%B4"><span class="toc-number">11.</span> <span class="toc-text">11.尾巴</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/posts/75e3a0d6.html"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/posts/75e3a0d6.html&text=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/posts/75e3a0d6.html&is_video=false&description=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=基于Ubuntu20.04搭建伪分布式Hadoop生态圈&body=Check out this article: http://example.com/posts/75e3a0d6.html"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/posts/75e3a0d6.html&title=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/posts/75e3a0d6.html&name=基于Ubuntu20.04搭建伪分布式Hadoop生态圈&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/posts/75e3a0d6.html&t=基于Ubuntu20.04搭建伪分布式Hadoop生态圈"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2021-2022
    Giesen
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Article</a></li>
         
          <li><a href="/categories/gallery">Gallery</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?816b9aa62faaa826317c7a6ab717a247";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
        </script>

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
